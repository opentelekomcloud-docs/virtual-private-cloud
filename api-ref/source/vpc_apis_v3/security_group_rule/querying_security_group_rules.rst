:original_name: vpc_apiv3_0017.html

.. _vpc_apiv3_0017:

Querying Security Group Rules
=============================

Function
--------

After a security group rule is created, you can call this API to query all information about the security group rule, including the ID and protocol.

URI
---

GET /v3/{project_id}/vpc/security-group-rules

.. table:: **Table 1** Path Parameters

   +-----------------+-----------------+-----------------+----------------------------+
   | Parameter       | Mandatory       | Type            | Description                |
   +=================+=================+=================+============================+
   | project_id      | Yes             | String          | -  Definition: Project ID. |
   |                 |                 |                 |                            |
   |                 |                 |                 | -  Range: None             |
   +-----------------+-----------------+-----------------+----------------------------+

.. table:: **Table 2** Query Parameters

   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter               | Mandatory       | Type              | Description                                                                                                                                             |
   +=========================+=================+===================+=========================================================================================================================================================+
   | limit                   | No              | Integer           | -  Definition: Number of records returned on each page.                                                                                                 |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: 0-2000                                                                                                                                        |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker                  | No              | String            | -  Definition: ID of the resource from which the pagination query starts. If the parameter is left blank, only resources on the first page are queried. |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: Security group rule ID.                                                                                                                       |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                      | No              | Array of strings  | -  Definition: ID of a security group rule. Multiple IDs can be specified for filtering.                                                                |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | security_group_id       | No              | Array of strings  | -  Definition: ID of the security group that a security group rule belongs to. Multiple IDs can be specified for filtering.                             |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | protocol                | No              | Array of strings  | -  Definition: Communication protocol of a security group rule. Multiple values can be specified for filtering.                                         |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description             | No              | Array of strings  | -  Definition: Description of a security group rule. Multiple descriptions can be specified for filtering.                                              |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_group_id         | No              | Array of strings  | -  Definition: Remote security group ID of a security group rule. Multiple IDs can be specified for filtering.                                          |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | direction               | No              | String            | -  Definition: Inbound or outbound direction of a security group rule.                                                                                  |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range:                                                                                                                                               |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   |    -  **ingress**: inbound direction                                                                                                                    |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   |    -  **egress**: outbound direction                                                                                                                    |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | action                  | No              | String            | -  Definition: Action of a security group rule.                                                                                                         |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range:                                                                                                                                               |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   |    -  **allow**                                                                                                                                         |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   |    -  **deny**                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_ip_prefix        | No              | String            | -  Definition: Remote IP address of a security group rule.                                                                                              |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: The value must be in CIDR format.                                                                                                             |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id              | No              | Array of strings  | -  Definition: Project ID.                                                                                                                              |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | priority                | No              | Array of integers | -  Definition: Priority of a security group rule. Multiple values can be specified for filtering.                                                       |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ethertype               | No              | Array of strings  | -  Definition: IP address version of a security group rule. Multiple values can be specified for filtering.                                             |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: **IPv4**, **IPv6**, **ipv4**, and **ipv6**                                                                                                    |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_address_group_id | No              | Array of strings  | -  Definition: Remote IP address group ID of a security group rule. Multiple IDs can be specified for filtering.                                        |
   |                         |                 |                   |                                                                                                                                                         |
   |                         |                 |                   | -  Range: None                                                                                                                                          |
   +-------------------------+-----------------+-------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------------+
   | Parameter             | Type                                                                                   | Description                                                     |
   +=======================+========================================================================================+=================================================================+
   | request_id            | String                                                                                 | -  Definition: Request ID.                                      |
   |                       |                                                                                        |                                                                 |
   |                       |                                                                                        | -  Range: None                                                  |
   +-----------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------------+
   | security_group_rules  | Array of :ref:`SecurityGroupRule <vpc_apiv3_0017__response_securitygrouprule>` objects | -  Definition: Response body for querying security group rules. |
   |                       |                                                                                        |                                                                 |
   |                       |                                                                                        | -  Range: None                                                  |
   +-----------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------------+
   | page_info             | :ref:`PageInfo <vpc_apiv3_0017__response_pageinfo>` object                             | -  Definition: Pagination information.                          |
   |                       |                                                                                        |                                                                 |
   |                       |                                                                                        | -  Range: None                                                  |
   +-----------------------+----------------------------------------------------------------------------------------+-----------------------------------------------------------------+

.. _vpc_apiv3_0017__response_securitygrouprule:

.. table:: **Table 4** SecurityGroupRule

   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter               | Type                  | Description                                                                                                                                                                                                                                                          |
   +=========================+=======================+======================================================================================================================================================================================================================================================================+
   | id                      | String                | -  Definition: ID of a security group rule. After a security group rule is created, a security group rule ID is generated, which uniquely identifies the security group rule.                                                                                        |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: The value is in UUID format with hyphens (-).                                                                                                                                                                                                              |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description             | String                | -  Definition: Description of a security group rule.                                                                                                                                                                                                                 |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: The value can contain no more than 255 characters and cannot contain angle brackets (< or >).                                                                                                                                                              |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | security_group_id       | String                | -  Definition: ID of the security group that a security group rule belongs to.                                                                                                                                                                                       |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: None                                                                                                                                                                                                                                                       |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | direction               | String                | -  Definition: Inbound or outbound direction of a security group rule.                                                                                                                                                                                               |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range:                                                                                                                                                                                                                                                            |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **ingress**: inbound direction                                                                                                                                                                                                                                 |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **egress**: outbound direction                                                                                                                                                                                                                                 |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | protocol                | String                | -  Definition: Communication protocol of a security group rule.                                                                                                                                                                                                      |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range:                                                                                                                                                                                                                                                            |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **icmp**                                                                                                                                                                                                                                                       |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **tcp**                                                                                                                                                                                                                                                        |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **udp**                                                                                                                                                                                                                                                        |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **icmpv6**                                                                                                                                                                                                                                                     |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  IP protocol number                                                                                                                                                                                                                                             |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ethertype               | String                | -  Definition: IP address version of a security group rule.                                                                                                                                                                                                          |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range:                                                                                                                                                                                                                                                            |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  IPv4                                                                                                                                                                                                                                                           |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  IPv6                                                                                                                                                                                                                                                           |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | multiport               | String                | -  Definition: Port range of a security group rule.                                                                                                                                                                                                                  |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: The value can be a single port (80), a port range (1-30), or inconsecutive ports separated by commas (22,3389,80).                                                                                                                                         |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | action                  | String                | -  Definition: Action of a security group rule.                                                                                                                                                                                                                      |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range:                                                                                                                                                                                                                                                            |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **allow**                                                                                                                                                                                                                                                      |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  **deny**                                                                                                                                                                                                                                                       |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | priority                | Integer               | -  Definition: Priority of a security group rule.                                                                                                                                                                                                                    |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: The value is from 1 to 100. The value 1 indicates the highest priority.                                                                                                                                                                                    |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_group_id         | String                | -  Definition: ID of the remote security group of a security group rule. If the action of the rule is **allow**, the traffic from the remote security group is allowed. If the action of the rule is **deny**, the traffic from the remote security group is denied. |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: ID of an existing security group.                                                                                                                                                                                                                          |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_ip_prefix        | String                | -  Definition: Remote IP address of a security group rule.                                                                                                                                                                                                           |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  If **direction** is set to **egress**, the IP address is the outbound destination and will be accessed by instances in the security group.                                                                                                                     |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       |    -  If **direction** is set to **ingress**, the IP address is the inbound source and will access the instances in the security group.                                                                                                                              |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: CIDR notation format. If an IP address is transferred in the request, the IP address is automatically formatted with /32 as the subnet mask, for example, 192.168.21.45/32.                                                                                |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | remote_address_group_id | String                | -  Definition: ID of the remote IP address group of a security group rule.                                                                                                                                                                                           |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: ID of an existing IP address group.                                                                                                                                                                                                                        |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at              | String                | -  Definition: Time when a security group rule was created.                                                                                                                                                                                                          |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: UTC time in the format of yyyy-MM-ddTHH:mm:ssZ                                                                                                                                                                                                             |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at              | String                | -  Definition: Time when a security group rule was updated.                                                                                                                                                                                                          |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: UTC time in the format of yyyy-MM-ddTHH:mm:ssZ                                                                                                                                                                                                             |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id              | String                | -  Definition: ID of the project that a security group rule belongs to.                                                                                                                                                                                              |
   |                         |                       |                                                                                                                                                                                                                                                                      |
   |                         |                       | -  Range: None                                                                                                                                                                                                                                                       |
   +-------------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _vpc_apiv3_0017__response_pageinfo:

.. table:: **Table 5** PageInfo

   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                   |
   +=======================+=======================+===============================================================================================================================+
   | previous_marker       | String                | -  Definition: The first record on the current page.                                                                          |
   |                       |                       |                                                                                                                               |
   |                       |                       | -  Range: None                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | current_count         | Integer               | -  Definition: Total number of records on the current page.                                                                   |
   |                       |                       |                                                                                                                               |
   |                       |                       | -  Range: None                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | next_marker           | String                | -  Definition: The last record on the current page. The parameter **next_marker** does not exist if the page is the last one. |
   |                       |                       |                                                                                                                               |
   |                       |                       | -  Range: None                                                                                                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Query security group rules.

.. code-block:: text

   GET https://{Endpoint}/v3/{project_id}/vpc/security-group-rules

Example Responses
-----------------

**Status code: 200**

Normal response to the GET operation. For more status codes, see :ref:`Status Codes <vpc_api_0002>`.

.. code-block::

   {
     "request_id" : "80747d36e3376c0894ba8f9a9156355d",
     "security_group_rules" : [ {
       "id" : "f626eb24-d8bd-4d26-ae0b-c16bb65730cb",
       "project_id" : "060576782980d5762f9ec014dd2f1148",
       "security_group_id" : "0552091e-b83a-49dd-88a7-4a5c86fd9ec3",
       "direction" : "ingress",
       "protocol" : "tcp",
       "description" : "security group rule description",
       "created_at" : "2020-08-13T07:12:36.000+00:00",
       "updated_at" : "2020-08-13T07:12:36.000+00:00",
       "ethertype" : "IPv4",
       "remote_ip_prefix" : "10.10.0.0/16",
       "multiport" : 333,
       "action" : "allow",
       "priority" : 1,
       "remote_group_id" : null,
       "remote_address_group_id" : null
     } ]
   }

Status Codes
------------

+-------------+------------------------------------------------------------------------------------------------------+
| Status Code | Description                                                                                          |
+=============+======================================================================================================+
| 200         | Normal response to the GET operation. For more status codes, see :ref:`Status Codes <vpc_api_0002>`. |
+-------------+------------------------------------------------------------------------------------------------------+

Error Codes
-----------

See :ref:`Error Codes <vpc_api_0003>`.
