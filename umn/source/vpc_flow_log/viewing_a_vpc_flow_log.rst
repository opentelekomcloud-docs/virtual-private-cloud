:original_name: FlowLog_0004.html

.. _FlowLog_0004:

Viewing a VPC Flow Log
======================

Scenarios
---------

View information about your flow log record.

The capture window is approximately 10 minutes, which indicates that a flow log record will be generated every 10 minutes. After creating a VPC flow log, you need to wait about 10 minutes before you can view the flow log record.

.. note::

   If an ECS is in the stopped state, its flow log records will not be displayed.

Procedure
---------

#. Log in to the management console.

2. Click |image1| in the upper left corner and select the desired region and project.

3. Click |image2| in the upper left corner and choose **Network** > **Virtual Private Cloud**.

4. In the navigation pane on the left, choose **VPC Flow Logs**.

5. Locate the target VPC flow log and click **View Log Record** in the **Operation** column to view information about the flow log record in LTS.


   .. figure:: /_static/images/en-us_image_0191577030.png
      :alt: **Figure 1** Viewing a log record

      **Figure 1** Viewing a log record


   .. figure:: /_static/images/en-us_image_0191588554.png
      :alt: **Figure 2** Flow log record

      **Figure 2** Flow log record

   The flow log record is in the following format:

   .. code-block::

      <version> <project-id> <interface-id> <srcaddr> <dstaddr> <srcport> <dstport> <protocol> <packets> <bytes> <start> <end> <action> <log-status>

   Example 1: The following is an example of a flow log record in which data was recorded during the capture window:

   .. code-block::

      1 5f67944957444bd6bb4fe3b367de8f3d 1d515d18-1b36-47dc-a983-bd6512aed4bd 192.168.0.154 192.168.3.25 38929 53 17 1 96 1548752136 1548752736 ACCEPT OK

   Value **1** indicates the VPC flow log version. Traffic with a size of 96 bytes to NIC **1d515d18-1b36-47dc-a983-bd6512aed4bd** during the past 10 minutes (from 16:55:36 to 17:05:36 on January 29, 2019) was allowed. A data packet was transmitted over the UDP protocol from source IP address **192.168.0.154** and port **38929** to destination IP address **192.168.3.25** and port **53**.

   Example 2: The following is an example of a flow log record in which no data was recorded during the capture window:

   .. code-block::

      1 5f67944957444bd6bb4fe3b367de8f3d 1d515d18-1b36-47dc-a983-bd6512aed4bd - - - - - - - 1431280876 1431280934 - NODATA

   Example 3: The following is an example of a flow log record in which data was skipped during the capture window:

   .. code-block::

      1 5f67944957444bd6bb4fe3b367de8f3d 1d515d18-1b36-47dc-a983-bd6512aed4bd - - - - - - - 1431280876 1431280934 - SKIPDATA

   :ref:`Table 1 <flowlog_0004__table1313851722313>` describes the fields of a flow log record.

   .. _flowlog_0004__table1313851722313:

   .. table:: **Table 1** Log field description

      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | Field                 | Description                                                                                                                                                                                                                                                                                                                                   | Example Value                        |
      +=======================+===============================================================================================================================================================================================================================================================================================================================================+======================================+
      | version               | The VPC flow log version.                                                                                                                                                                                                                                                                                                                     | 1                                    |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | project-id            | The project ID.                                                                                                                                                                                                                                                                                                                               | 5f67944957444bd6bb4fe3b367de8f3d     |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | interface-id          | The ID of the NIC for which the traffic is recorded.                                                                                                                                                                                                                                                                                          | 1d515d18-1b36-47dc-a983-bd6512aed4bd |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | srcaddr               | The source IP address.                                                                                                                                                                                                                                                                                                                        | 192.168.0.154                        |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | dstaddr               | The destination IP address.                                                                                                                                                                                                                                                                                                                   | 192.168.3.25                         |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | srcport               | The source port.                                                                                                                                                                                                                                                                                                                              | 38929                                |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | dstport               | The destination port.                                                                                                                                                                                                                                                                                                                         | 53                                   |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | protocol              | The Internet Assigned Numbers Authority (IANA) protocol number of the traffic. For details, see `Assigned Internet Protocol Numbers <http://www.iana.org/assignments/protocol-numbers/protocol-numbers.xhtml>`__.                                                                                                                             | 17                                   |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | packets               | The number of packets transferred during the capture window.                                                                                                                                                                                                                                                                                  | 1                                    |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | bytes                 | The number of bytes transferred during the capture window.                                                                                                                                                                                                                                                                                    | 96                                   |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | start                 | The time, in Unix seconds, of the start of the capture window.                                                                                                                                                                                                                                                                                | 1548752136                           |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | end                   | The time, in Unix seconds, of the end of the capture window.                                                                                                                                                                                                                                                                                  | 1548752736                           |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | action                | The action associated with the traffic:                                                                                                                                                                                                                                                                                                       | ACCEPT                               |
      |                       |                                                                                                                                                                                                                                                                                                                                               |                                      |
      |                       | -  **ACCEPT**: The recorded traffic was allowed by the security groups or firewalls.                                                                                                                                                                                                                                                          |                                      |
      |                       | -  **REJECT**: The recorded traffic was denied by the security groups or firewalls.                                                                                                                                                                                                                                                           |                                      |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+
      | log-status            | The logging status of the VPC flow log:                                                                                                                                                                                                                                                                                                       | OK                                   |
      |                       |                                                                                                                                                                                                                                                                                                                                               |                                      |
      |                       | -  **OK**: Data is logging normally to the chosen destinations.                                                                                                                                                                                                                                                                               |                                      |
      |                       | -  **NODATA**: There was no traffic of the **Filter** setting to or from the NIC during the capture window.                                                                                                                                                                                                                                   |                                      |
      |                       | -  **SKIPDATA**: Some flow log records were skipped during the capture window. This may be caused by an internal capacity constraint or an internal error.                                                                                                                                                                                    |                                      |
      |                       |                                                                                                                                                                                                                                                                                                                                               |                                      |
      |                       | Example:                                                                                                                                                                                                                                                                                                                                      |                                      |
      |                       |                                                                                                                                                                                                                                                                                                                                               |                                      |
      |                       | When **Filter** is set to **Accepted traffic**, if there is accepted traffic, the value of **log-status** is **OK**. If there is no accepted traffic, the value of **log-status** is **NODATA** regardless of whether there is rejected traffic. If some accepted traffic is abnormally skipped, the value of **log-status** is **SKIPDATA**. |                                      |
      +-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------+

You can enter a keyword on the log topic details page on the LTS console to search for flow log records.

.. |image1| image:: /_static/images/en-us_image_0141273034.png
.. |image2| image:: /_static/images/en-us_image_0000001503490746.png
